# Maturity guidance

| Practice              | Low risk                                                                                                                                                             | Moderate risk                                                                                                                               | High risk                                                                                                                                                       |
| --------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Modular code**      | Individual pieces of logic are written as functions                                                                                                                  | Code is written using classes if appropriate                                                                                                | Objects and functions are open for extension but closed for modification; functionality can be extended without modifying the source code                       |
|                       | The code avoids repetition, for example by writing repetitive code into functions or classes                                                                         | Classes and functions take on one task and perform it well.                                                                                 | Subclasses retain the functionality of their parent class while adding functionality. Parent class objects can be replaced with instances of the subclass.      |
|                       |                                                                                                                                                                      | There is only one reason to change each function.                                                                                           |
| **Good Coding Practices** | Names used in code and data are informative and concise                                                                                                              | Code meaning and logic is explicit not implicit                                                                                             |
|                       | Code is clear and avoids unnecessary complexity                                                                                                                      |
|                       | Code follows a standard style, e.g. PEP8 (Python) or Google/tidyverse (R)                                                                                            |
| **Project structure** | A clear and standard directory structure should be implemented along with the use of standard scripts.                                                               | Code should be stored in themed files and code should be packaged for easier use when shared.                                               |
| **Code documentation**| Comments are used to describe why code is written in a particular way, rather than describing what the code is doing.                                                | Human-readable (preferably HTML) documentation is generated automatically from code documentation.                                          | Documentation is hosted for easy access. GitHub Pages and Read the docs can be used to host documentation publicly.                                             |
|                       | Comments are kept up to date, so they do not confuse the reader.                                                                                                     |
|                       | Code is not commented out to adjust which lines of code run.                                                                                                         |
|                       | All functions and classes should be documented to describe what they do, what inputs they take and what they return.                                                 |
|                       | Python code is documented using docstrings. R code is documented using {roxygen2} comments.                                                                          |
| **Project documentation** | Copyright and licenses are specified for both documentation and code                                                                                                 | Releases of the project used for reports, publications, or other outputs are specifically versioned using a standard scheme such as SemVer. | Design certificates by an external reviewer confirm that the design is compliant with requirements.                                                             |
|                       | A README file details the purpose of the project, basic installation instructions, and examples of usage                                                             |  A summary of changes to functionality are documented in a changelog following releases                                                     | If appropriate, the software is fully specified.                                                                                                                |
|                       | The data required for the analysis are clearly documented with a brief discussion of their suitability                                                               |  Example usage of the package and underlying mechanics is documented for maintainers and developers                                         |
|                       | Where appropriate, guidance for prospective contributors is available including a code of conduct                                                                    |
|                       | If the project's users will not be familiar with its internals, desk instructions will lead users through many example use cases                                     |
|                       | Instructions for how to cite the project are given                                                                                                                   |
|                       | What analytical quality assurance has been conducted is clearly documented                                                                                           |
|                       | Assumptions in the analysis and their quality are documented next to the code that implements them and collected in a separate document for users                    |
|**Version control**    | Code is version controlled using git.                                                                                                                                | Committing standards are followed such as appropriate commit summary and message supplied.                                                  | Continuous deployment is applied so that routine tasks for merging changes are automated.                                                                       |
|                       | Code is committed regularly, preferably when a discrete unit of work has been completed.                                                                             | Commits are tagged at significant stages or models.                                                                                         |
|                       | Appropriate branching is used during development.                                                                                                                    | Issues standards are followed such as proper logging of the title, description, labels and comments.                                        |
|                       | Code is open-sourced (any sensitive data are omitted or replaced with dummy data).                                                                                   | Continuous integration is applied through tools such as GitHub Actions, to ensure that each change is integrated into the workflow smoothly |
| **Configuration**     | Secrets are not written in code but configured as environment variables.                                                                                             | Version control of configuration files is applied.                                                                                          |
|                       | Secrets are stored appropriately.                                                                                                                                    | If appropriate, multiple configuration files are used and interchangeable depending on system/local/user.                                   |
|                       | Configuration is written as code, separate from code used for analysis.                                                                                              |
|                       | Configuration for particular releases and publications is recorded.                                                                                                  |
| **Data management**   | All data for analysis are stored in an open format, so that specific software is not required to access them.                                                        | Fields within input and output datasets are documented in a data dictionary.                                                                | Data are documented in an information asset register.                                                                                                           |
|                       | All input data is documented in a data register, including where they come from and their importance to the analysis.                                                | Large or complex data are stored in a database.                                                                                             |
|                       | Input data is stored safely and is read-only.                                                                                                                        |
|                       | Outputs from your analysis are disposable and should be regularly deleted while analysis develops. Your analysis code should be able to regenerate them at any time. |
|                       | Non-sensitive data are made available to users. If data are sensitive, dummy data is made available.                                                                 |
|                       | Input data are versioned.                                                                                                                                            |                                                                                                                                             |
|                       | Data quality is monitored, as per the data quality framework.                                                                                                        |
| **Peer Review**       | Peer review is conducted and recorded                                                                                                                                | Pair programming is used to review code and share knowledge                                                                                 |
|                       | The roles and responsibilities of team members are clearly defined                                                                                                   | Users are free and encouraged to participate in peer review                                                                                 |
| **Testing**           | Core functionality is unit tested                                                                                                                                    | Test outcomes are automatically recorded using continuous integration or git hooks.                                                         | Formal user acceptance testing is conducted and recorded                                                                                                        |
|                       | Informal tests are recorded                                                                                                                                          | The whole process is tested from start to finish                                                                                            | Integration tests ensure that modules of code work as expected                                                                                                  |
|                       | Stakeholder or user acceptance sign-offs are recorded                                                                                                                | Test code is clean and readable, including fixtures and parametrisation                                                                     |
|                       | Bug fixes include implementing new tests                                                                                                                             |
|                       | Unit tests are implemented the same bug does not arise again in the future                                                                                           |
| **Dependency management** | Necessary secrets, passwords, and tokens are documented and stored outside version control                                                                           | Where appropriate, code is independent of operating system (e.g. file paths)                                                                | Where appropriate, builds to replicate the operating environment, such as docker containers or virtual machine builds, are available and are version controlled |
|                       | Required libraries and packages are documented, including their versions                                                                                             | Dependencies are managed separately for users, developers, and testers                                                                      |
|                       | Working operating system environments are specified and documented                                                                                                   | There are as few dependencies as appropriate                                                                                                |
|                       |                                                                                                                                                                      | Package dependencies are managed using an environment manager such as virtualenv or renv.                                                   |
| **Project management**| You should use an issue tracker (e.g Trello/Jira) and new issues should be guided by users’ needs and stories.                                                       |
|                       | Acceptance criteria should be noted for requirements and a fulfilment record held.                                                                                   |
|                       | Roles and responsibilities should be defined and documented.                                                                                                         |
|                       | Quality assurance standards and processes need to be defined. These should be based around this guidance document.                                                   |
| **Logging**           | Misuses or failures produce informative error messages                                                                                                               | Pipeline route is recorded if decisions are made in code, allowing subsequent analysis                                                      |
|                       | Pipeline configuration is recorded                                                                                                                                   |
